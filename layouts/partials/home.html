<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Tangerine">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora&family=Dancing+Script&family=Parisienne&family=Playfair+Display&family=Amita:wght@400;500&display=swap" rel="stylesheet">
<section class="container centered">
  <div class="about">

    <!-- {{ partialCached "home/avatar.html" . }} -->

    {{ partialCached "home/author.html" . }}

    {{ partialCached "home/social.html" . }}
  </div>
  {{ partialCached "home/extensions.html" . }}
</section>
<section class="modal" style="margin: 0; padding: 0; background-image: url('/images/modal.png'); background-size:cover;">
  <!-- <div class="flex">
    <img src="images/avatar.png" style="margin-left: 4px;" width="50px" height="50px" alt="user" />
    <h2 style="font-family: 'Brush Script MT', cursive; text-align: center; margin:auto; color:#ae72aa;">40 Aniversario de Velia y Felipe</h2>
    <button class="btn-close">⨉</button>
  </div> -->
  <div class="modal-content">
    <h2 style="text-align: center; font-family: 'Parisienne', cursive; color:#90035fbb; text-shadow: white 0px 0px 10px;">¡Acompáñanos a celebrar esta ocasión tan especial!</h2>
    <div class="modal-text">
      <p><strong>Misa de Acción de Gracias:</strong></p>
      <p>2 de Marzo 2024 a la 1:00pm</p>
      <p>Santuario de Ntra. Señora de Guadalupe</p>      
      <br>
      <p><strong>Recepción:</strong></p>
      <p>3:00pm <a href="https://maps.app.goo.gl/1aA5YdFZuZtFD5dR9" target="_blank" style="text-align: center;" ><i class="fa fa-map-marker" aria-hidden="true"></i>  Jardin Palmas 10/El Granero</a></p>
      
      <p>Villas del Monte s/n, Paseo de Altozano, Morelia, Mich.</p>
    </div>
  </div>
  <br>
  <div class="btn close-btn">
    <button class="btn" id="close-modal" style="
    color:#dfdad3; background-color: #90035fbb; border-radius: 12px; width:150px;">Cerrar</button>
  </div>
  
</section>
<div class="overlay"></div>
<link rel="stylesheet" href="/css/custom.css" media="screen">

<script>
  (() => {
    const sauce = 'TWFyem8gMjAyNA==';

    // --- Sets Background Image ---
    // style="background-image: url('images/venue.webp'); background-size:cover"
    let contentEl = document.getElementsByClassName('content')[0];
    contentEl.style.backgroundImage = "url('images/venue.png')";
    contentEl.style.backgroundSize = "cover";

    let btnOpen = document.querySelector(".btn-open");
    // -- Read Query Parameter decide if modal should be opened ---
    let queryParams = new URLSearchParams(window.location.search);
    let accessCode = queryParams.get('acceso');
    if (accessCode != null) {
      window.localStorage.setItem('acceso', accessCode)
    } else {
      accessCode = window.localStorage.getItem('acceso')
    }

    if (accessCode != null && btoa(accessCode) == sauce) {
      console.log(accessCode);
    }

    // Get the modal, overlay, and buttons
    let modal = document.querySelector(".modal");
    let overlay = document.querySelector(".overlay");
    // let btnClose = document.querySelector(".btn-close");
    let btnListo = document.getElementById('close-modal');
    console.log(btnListo);

    // Open the modal when the open button is clicked
    btnOpen.addEventListener("click", () => {
      let accesInput = document.getElementById('input-acceso')
      if (accesInput.value != '') {
        window.localStorage.setItem('acceso', accesInput.value)
      }

      let ac = window.localStorage.getItem('acceso')
      if (btoa(ac) == sauce) {
        modal.style.display = 'block';
        overlay.style.display = 'block';
      } else {
        let acIn = document.getElementById('input-acceso')
        acIn.style.display = 'inline-block';
      }
    });

    // Function to close the modal
    let close = () => {
      modal.style.display = 'none';
      overlay.style.display = 'none';
    }

    // Close the modal when the close button or the overlay is clicked
    // btnClose.addEventListener("click", close);
    overlay.addEventListener("click", close);
    btnListo.addEventListener("click", close)

    // Close the modal when the escape key is pressed
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && !modal.style.display != "none") {
        close();
      }
    });

  })()
</script>
